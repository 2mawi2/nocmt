# nocmt - Tired of AI Tools Flooding Your Code With Comments?

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Go Report Card](https://goreportcard.com/badge/github.com/2mawi2/nocmt)](https://goreportcard.com/report/github.com/2mawi2/nocmt)
[![Test Coverage](https://img.shields.io/badge/coverage-65%25-yellowgreen)](https://github.com/2mawi2/nocmt/actions)
[![Benchmarks](https://img.shields.io/badge/benchmarks-view%20results-blue)](https://github.com/2mawi2/nocmt/blob/main/benchmarks/latest.txt)

> **Clean code speaks for itself. Let it.**

A fast, language-aware tool to strip away unwanted comments from source code - perfect for removing those verbose explanations generated by AI coding assistants like GitHub Copilot, Cursor, and Windsurf.

*Because let's face it - if your code needs a novel-length explanation, maybe it's the code that needs fixing, not the documentation.*

## Why nocmt?

- **AI Comment Cleanup**: Remove those verbose explanations AI tools love to add to your code
- **Code Cleanup**: Commit clean, professional code without unnecessary comments
- **Keep Only What Matters**: Preserve important directives like `//go:generate`
- **Selective Processing**: Remove comments only from changed lines in git-staged files
- **Customizable**: Powerful regex patterns to keep specific comments

## Installation

### Homebrew

You can install nocmt using Homebrew:

```bash
brew tap 2mawi2/tap
brew install nocmt
```

```bash
# Using go install
go install github.com/2mawi2/nocmt@latest

# From source
git clone https://github.com/2mawi2/nocmt.git
cd nocmt
go build
```

## Quick Start

Ready to let your code speak for itself? Here's how:

```bash
# Remove AI-generated comments from a file
nocmt -path main.go

# Process an entire project directory
nocmt -path ./src -preserve-directives

# Clean up only your staged changes before committing
nocmt --staged

# Keep your TODO comments while removing AI explanations
nocmt -add-ignore "TODO"
```

## AI Comment Removal

nocmt was specifically designed to help developers who use AI coding assistants maintain clean, professional codebases:

- Remove those paragraph-long explanations that AI tools love to add
- Strip away "here's what I'm doing" commentary from your code
- Keep your code review process focused on your logic, not AI verbosity
- Perfect for everybody that uses GitHub Copilot, Cursor, WindSurf, Claude Code, or other agentic AI coding tools
- Prepare your code for professional review or open source contribution

## The Great Comment Debate

*"Code is like a joke. If you have to explain it, it's bad."* â€” Anonymous AI

### Why Comments Can Be Problematic

- **Self-documenting code** should be the ideal - clear names, logical structure, and obvious intent
- **Comments get outdated** faster than the code they describe, creating dangerous misinformation
- **Cognitive load** increases when developers must parse both code and comments
- **Code reviews** get cluttered with commentary instead of focusing on logic and edge cases

### The AI Comment Controversy

AI coding assistants have reignited this debate by generating copious amounts of comments:

- **Context window waste:** Research shows verbose comments consume valuable tokens that could be used for more code [1]
- **Performance impact:** For simple, self-documenting code, removing comments can improve model performance by up to 40% [2]
- **Mixed results:** For complex algorithms, strategic comments actually improve an AI's reasoning and code quality [3]
- **Style mismatch:** AI tools often produce comments in a different style than the existing codebase

nocmt gives you control back by letting you decide exactly which comments stay and which go. Because in the end, it's _your_ code that matters.

## Supported Languages

- Go
- JavaScript/TypeScript
- Java
- Python
- Rust
- Bash
- CSS

## Usage

```
nocmt -path <filepath|directory> [-preserve-directives] [-dry-run] [-verbose] [-force] [-ignore pattern1,pattern2] [-add-ignore pattern] [-add-ignore-global pattern] [-staged]
```

### Options

- `-path`: Path to the source file or directory to process (required unless using `--staged`)
- `-preserve-directives`: Preserve compiler directives in the output
- `-dry-run`: Don't write changes, just show what would be done
- `-verbose`: Show verbose output
- `-force`: Force processing even if not a git repository
- `-ignore`: Comma-separated list of regex patterns to ignore comments
- `-add-ignore`: Add a regex pattern to the local ignore list
- `-add-ignore-global`: Add a regex pattern to the global ignore list
- `-staged`: Process only staged files and remove comments only from changed lines

## Configuration

nocmt supports both global (`~/.nocmt/config.json`) and local (`.nocmt.json`) configuration:

```json
{
  "ignorePatterns": [
    "TODO",
    "^\\s*//\\s*WHY",
    "#\\d+",
    "TESTPROJECT-\\d+"
  ]
}
```

## Git Integration

### Pre-commit Hook

```bash
# Install git pre-commit hook
nocmt --install-hooks
```

### Using with pre-commit framework

```yaml
repos:
- repo: https://github.com/2mawi2/nocmt
  rev: v1.0.0  # Use the latest version
  hooks:
  - id: nocmt
    name: nocmt
    description: Remove comments from source code
    entry: nocmt --staged --preserve-directives
    language: golang
    files: \.(go|js|ts|java|py|cs|rs|kt|swift|sh|css)$
```

## License

[MIT License](LICENSE)

## References

[1] arXiv:2404.10155v1, "The impact of comment density on code generation performance", https://lsiddiqsunny.github.io/public/2404.10155v1.pdf

[2] arXiv:2505.07768, "Optimizing prompt efficiency in code generation tasks", https://arxiv.org/abs/2505.07768

[3] ACL 2024 Findings, Paper 809, "Logical comment prompting improves code generation", https://aclanthology.org/2024.findings-acl.809.pdf 